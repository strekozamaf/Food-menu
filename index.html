<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Food Master</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: var(--tg-theme-bg-color, #ffffff);
            --text: var(--tg-theme-text-color, #000000);
            --hint: var(--tg-theme-hint-color, #999999);
            --btn: var(--tg-theme-button-color, #2481cc);
            --btn-text: var(--tg-theme-button-text-color, #ffffff);
        }

        body {
            font-family: sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0; padding: 15px;
            user-select: none;
        }

        .page { display: none; }
        .page.active { display: block; }

        /* –°–µ—Ç–∫–∞ –º–µ–Ω—é */
        .menu-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;
        }

        .menu-item {
            background: rgba(0,0,0,0.05);
            padding: 30px 10px; border-radius: 20px;
            text-align: center; cursor: pointer;
            border: 1px solid rgba(0,0,0,0.1);
        }

        /* –ü–æ–ª—è –≤–≤–æ–¥–∞ */
        input {
            width: 100%; padding: 10px; margin: 5px 0;
            border-radius: 10px; border: 1px solid var(--hint);
            box-sizing: border-box;
            background: var(--bg); color: var(--text);
        }

        .main-btn {
            background: var(--btn); color: var(--btn-text);
            border: none; width: 100%; padding: 12px;
            border-radius: 10px; font-weight: bold; margin-top: 10px;
        }

        .list-item {
            display: flex; justify-content: space-between;
            padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);
            align-items: center;
        }

        .delete-btn { color: #ff4444; font-size: 12px; cursor: pointer; }
    </style>
</head>
<body>

    <div id="home" class="page active">
        <h2 style="text-align: center;">üçé Food Helper</h2>
        <div class="menu-grid">
            <div class="menu-item" onclick="showPage('products')">üõí<br>–ü—Ä–æ–¥—É–∫—Ç—ã</div>
            <div class="menu-item" onclick="showPage('recipes')">üç≥<br>–†–µ—Ü–µ–ø—Ç—ã</div>
            <div class="menu-item" onclick="showPage('shopping')">üìù<br>–ü–æ–∫—É–ø–∫–∏</div>
            <div class="menu-item" onclick="tg.close()">üö™<br>–í—ã—Ö–æ–¥</div>
        </div>
    </div>

    <div id="products" class="page">
        <h2>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h2>
        <div style="background: rgba(0,0,0,0.03); padding: 10px; border-radius: 10px; margin-bottom: 15px;">
            <input type="text" id="pName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω-—Ä, –Ø–±–ª–æ–∫–æ)">
            <input type="number" id="pCal" placeholder="–ö–∞–ª–æ—Ä–∏–∏">
            <input type="number" id="pPrice" placeholder="–¶–µ–Ω–∞">
            <button class="main-btn" onclick="addProduct()">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</button>
        </div>
        <div id="productsList"></div>
    </div>

    <div id="recipes" class="page">
        <h2>–ú–æ–∏ –†–µ—Ü–µ–ø—Ç—ã</h2>
        <p>–¢—É—Ç —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è —Ç–≤–æ–∏ –ª—é–±–∏–º—ã–µ –±–ª—é–¥–∞!</p>
    </div>

    <div id="shopping" class="page">
        <h2>–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h2>
        <p>–î–æ–±–∞–≤–ª—è–π —Å—é–¥–∞ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –∫—É–ø–∏—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω–µ.</p>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –≤–Ω—É—Ç—Ä–∏ –¢–µ–ª–µ–≥—Ä–∞–º–∞
        tg.BackButton.onClick(() => {
            showPage('home');
        });

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            if (pageId === 'home') {
                tg.BackButton.hide();
            } else {
                tg.BackButton.show();
            }
        }

        // –õ–æ–≥–∏–∫–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
        let products = JSON.parse(localStorage.getItem('my_products') || '[]');

        function renderProducts() {
            const list = document.getElementById('productsList');
            list.innerHTML = '';
            products.forEach((p, index) => {
                list.innerHTML += `
                    <div class="list-item">
                        <div>
                            <strong>${p.name}</strong><br>
                            <small>${p.cal} –∫–∫–∞–ª | ${p.price} ‚ÇΩ</small>
                        </div>
                        <div class="delete-btn" onclick="deleteProduct(${index})">–£–¥–∞–ª–∏—Ç—å</div>
                    </div>
                `;
            });
        }

        function addProduct() {
            const name = document.getElementById('pName').value;
            const cal = document.getElementById('pCal').value;
            const price = document.getElementById('pPrice').value;

            if (name && cal && price) {
                products.push({name, cal, price});
                localStorage.setItem('my_products', JSON.stringify(products));
                renderProducts();
                // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π
                document.getElementById('pName').value = '';
                document.getElementById('pCal').value = '';
                document.getElementById('pPrice').value = '';
            }
        }

        function deleteProduct(index) {
            products.splice(index, 1);
            localStorage.setItem('my_products', JSON.stringify(products));
            renderProducts();
        }

        // –ó–∞–ø—É—Å–∫ —Ä–µ–Ω–¥–µ—Ä–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        renderProducts();
    </script>
</body>
</html>
